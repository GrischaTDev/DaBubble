<div class="dialog-add-users-container">
  <div *ngIf="!this.channelService.addUserClicked">
    <h2>Mitglieder</h2>
    <div class="close" (click)="channelService.closeDialogAddUser()">
      <mat-icon>close</mat-icon>
    </div>
    <div
      class="dialog-add-users-content"
      *ngFor="let user of chatService.dataChannel.channelUsers; let i = index"
    >
      <div>
        <img [src]="user.avatar" />
        <p>{{ user.name }}</p>
      </div>
    </div>
    <div class="dialog-add-users">
      <div (click)="openSearchUser()" class="dialog-add-icon-add">
        <mat-icon>person_add</mat-icon>
      </div>
      <p>Mitglieder hinzufüngen</p>
    </div>
  </div>

  <div *ngIf="this.channelService.addUserClicked">
    <div class="dialog-add-users-container">
      <h2>Leute hinzufügen</h2>
      <div class="close" (click)="channelService.closePeopleSearch()">
        <mat-icon>close</mat-icon>
      </div>
      <div
        class="dialog-add-users-input-container"
        [style.min-height]="this.channelService.textareaHeight + 'px !important'"
      >
        <div
          class="push-addet-user-container"
          *ngFor="let userAddet of channelService.addetUser; let indexAddUser = index"
        >
          <img [src]="userAddet.avatar" />
          <p>{{ userAddet.name }}</p>
          <mat-icon
            class="dialog-add-users-close-icon"
            (click)="removeAddUser(userAddet, indexAddUser)"
            >close</mat-icon
          >
        </div>
        <textarea
          [(ngModel)]="channelService.content"
          [class.placeholder]="channelService.isEmpty"
          [innerHTML]="channelService.content"
          name="textarea"
          (input)="updateContent()"
          class="push-addet-user-textarea"
        ></textarea>
      </div>
      <div class="dialog-add-users-button-container">
        <span
          (click)="channelService.pushNewUserToChannel()"
          class="dialog-add-users-button"
          [ngClass]="{
          'dialog-add-users-button-not-available':
            this.channelService.addetUser.length === 0,
            'dialog-add-users-button-available':
            this.channelService.addetUser.length > 0,
        }"
          >Hinzufügen</span
        >
      </div>
    </div>
  </div>
</div>

<div *ngIf="!this.channelService.isEmpty" class="dialog-add-users-content-container">
  <div class="dialog-add-users-scroll-container">
    <div
      class="dialog-add-users-content"
      *ngFor="let userFilter of channelService.filteredUsers; let indexFilterUser = index"
    >
      <div
        (click)="pushAddetUser(userFilter, indexFilterUser, $event)"
        *ngIf="channelService.content || this.chatService.dataChannel.ownerUser[0].id !== userFilter.id 
        "
      >
        <img [src]="userFilter.avatar" />
        <p>{{ userFilter.name }}</p>
      </div>
    </div>
  </div>
</div>
