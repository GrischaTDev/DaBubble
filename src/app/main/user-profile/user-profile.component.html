<div class="profile-container" (click)="closeDialog()">
    <div class="user-pofile-dialog" (click)="doNotClose($event)">
        <div class="headline">
            <h2>Profil</h2>
            <div class="close" (click)="closeDialog()">
                <mat-icon>close</mat-icon>
            </div>
        </div>
        <div class="avatar">
            <img referrerpolicy="no-referrer" *ngIf="!directUserProfile?.avatar" src="{{ loggedInUser.avatar }}" alt="">
            <img referrerpolicy="no-referrer" *ngIf="directUserProfile?.avatar" src="{{ directUserProfile.avatar }}" alt="">
        </div>
        <div class="name">
            <span *ngIf="!directUserProfile?.name">{{ loggedInUser.name }}</span>
            <span *ngIf="directUserProfile?.name">{{ directUserProfile.name }}</span>
            <mat-icon *ngIf="!directUserProfile?.name" (click)="editUserProfile()" class="edit">edit</mat-icon>
            <span *ngIf="!directUserProfile?.name" (click)="editUserProfile()" class="edit-desktop">Bearbeiten</span>
        </div>
        <div class="status">
            <img *ngIf="!directUserProfile?.name" src="{{ loggedInUserStatus }}">
            <img *ngIf="directUserProfile?.name" src="{{ directUserProfileStatus }}">
        </div>
        <div class="email">
            <mat-icon>mail</mat-icon>
            <div class="email-adresse">
                <span class="titel">E-Mail-Adresse</span>
                <span class="adresse" *ngIf="!directUserProfile?.email">{{ loggedInUser.email }}</span>
                <span class="adresse" *ngIf="directUserProfile?.email">{{ directUserProfile.email }}</span>
            </div>
        </div>
        <div class="message-btn" *ngIf="directUserProfile?.name">
            <button (click)="closeDialog()"><mat-icon>mode_comment</mat-icon> Nachricht</button>
        </div>
    </div>
</div>

<div *ngIf="editProfileOpen" class="profile-container" (click)="closeDialog()">
  <form #editForm="ngForm" class="edit-user-pofile-dialog" (click)="doNotClose($event)"> 
    <div class="headline">
      <h2>Dein Profil bearbeiten</h2>
      <div class="close" (click)="closeDialog()">
        <mat-icon>close</mat-icon>
      </div>
    </div>
    <div class="avatar">
      <img referrerpolicy="no-referrer" src="{{ this.loggedInUser.avatar }}" alt="">
    </div>
    <div class="edit-name">
      <div>
        <mat-icon class="edit">account_circle</mat-icon>
        <span>Vollst채ndiger Name</span>
      </div>
      <input #nameInput="ngModel" [(ngModel)]="updateUserName" name="userName" type="text" placeholder="{{ this.loggedInUser.name }}" pattern="^[a-zA-Z]+ [a-zA-Z]+$" required>
    </div>
    <div class="edit-email">
      <div>
        <mat-icon class="edit">mail</mat-icon>
        <span class="titel">E-Mail-Adresse</span>
      </div>
      <input #emailInput="ngModel" [(ngModel)]="updateUserEmail" name="userEmail" type="email" placeholder="{{ this.loggedInUser.email }}" pattern="^[^@]+@[^@]+\.(de|com)$" required>
    </div>
    <div class="send-email-container" >
      <div class="verify-mail" *ngIf="userProfileService.isEmailSend" >
        Verifizierungs-E-Mail wurde gesendet. Bitte 체berpr체fe deine neue E-Mail-Adresse und best채tige diese.
      </div>
      <div class="error-mail" *ngIf="userProfileService.isEmailError" >
        Verifizierungs-E-Mail wurde nicht gesendet. Bitte melde dich erneut an.
      </div>
    </div>
    <div class="edit-btn">
      <div class="secondary-btn" (click)="closeDialog()">Abbrechen</div>
      <button [ngClass]="{
        'primary-btn': (nameInput.valid || emailInput.valid) && (nameInput.dirty || emailInput.dirty),
        'disabled-btn': (!nameInput.valid && !emailInput.valid) || (nameInput.pristine && emailInput.pristine)
      }" (click)="updateCurrentUser()" [disabled]="(!nameInput.valid && !emailInput.valid) || (nameInput.pristine && emailInput.pristine)">Speichern</button>
    </div>
  </form> 
</div>

